GLOBAL{ 

	FOREACH <{patient, newPatient, [Name]}> {

	PROPERTY patient{

		EVENTS{ 
			Trigger = SEND <{trigger_request}>
			Request = SEND <{request_record, Name}>
			Response = RECEIVE <{backend_response,{Patient, Diagnosis}}>
			Reject = RECEIVE <{backend_response, request_denied}>
		}EVENTS 

		STATES{ 
			
			BAD{
				violation {} 
			}BAD 
			NORMAL{ 
				response {}
				request {}
				trigger {}
			}NORMAL
			STARTING{
				start {}
			}STARTING 

		}STATES 
		
		TRANSITIONS{ 
			start -> trigger [Trigger\\]
			trigger -> request [Request\\<{variable, ["put(name, Name)"]}>]
			request -> start [Response\<Patient == get(name)>\]
			request -> start [Reject\\]
			request -> violation [Response\<Patient /= get(name)>\] 
		}TRANSITIONS 

	}PROPERTY

	}FOREACH

}GLOBAL
